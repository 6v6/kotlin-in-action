# 1. 코틀린이란 무엇이며, 왜 필요한가?
## 코틀린이란? 😎
자바 플랫폼에서 돌아가는 새로운 프로그래밍 언어를 말하며, 간결하고 실용적이며 자바 코드와의 상호운용성을 중시하는 언어이다. 주로 서버개발이나 안드로이드 개발 등에 사용한다.

### 코틀린 맛보기
```kotlin
data class Person(
    val name: String,
    val age: Int? = null // 디폴트 값은 null
)

fun main(args: Array<String>) {
    val persons = listOf(
        Person("Alice"),
        Person("Bob", age = 29)
    )
    val oldest = persons.maxBy { it.age ?: 0 } // 엘비스 연산자 사용
    println("The oldest is: $oldest")
}
```

위의 코드처럼 코틀린은 타입을 지정해주는 정적언어이며, 자바처럼 클래스 타입과 메소드를 정의할 수 있다. 자세한 내용은 2장에서 배울 예정이니 간단하게 이런 게 있구나 정도로 알고 있으면 된다.

## 코틀린의 주요 특성
### 대상 플랫폼
자바를 사용하고 있는 모든 곳에 사용할 수 있다. 주로, 서버개발이나 안드로이드 개발에 사용되지만 브라우저나 노드에서 실행할 수도 있을 만큼 영역이 다양하다.

### 정적 타입 지정 언어
**정적 타입(statically typed) 지정 언어**란 모든 프로그램 구성 요소의 타입을  ==컴파일 시점==에 알 수 있고 프로그램 안에서 객체의 필드나 메소드를 사용할 때마다 컴파일러가 타입을 검증해 준다는 뜻이다.

*cf. 동적 타입(dynamically typed) 지정 언어*
: 타입과 관계없이 모든 값을 변수에 넣을 수 있고 메소드나 필드 접근에 대한 검증이 실행 시점에 일어나며, 코드가 더 짧아지고 데이터 구조를 더 유연하게 생성 및 사용할 수 있으나 컴파일 실행 시점에 오류를 잡을 수 없다는 문제점이 있다.

코틀린은 자바처럼 정적 타입 지정 언어지만, 자바와는 달리 타입 추론이 가능한 언어이기 때문에 프로그래머는 타입 선언을 생략해도 된다. (참고로 세미콜론도 생략 가능하다.)
```kotlin
var x = 1
```

이때, **타입 추론(type inference)**란 프로그래머가 명시적으로 타입을 지정하지 않아도 컴파일러가 문맥을 고려해 변수 타입을 결정하는 기능을 말한다.

#### 정적 타입 지정의 장점
- 성능: 실행시점에 어떤 메소드를 호출할지 알아내는 과정이 불필요하다.
- 신뢰성: 컴파일러가 이미 검증 과정을 마쳤기 때문에 오류로 중단될 가능성이 낮아진다.
- 유지보수성: 객체의 타입을 알 수 있어 처음 본 코드여도 다루기 쉽다.
- 도구 지원: 리팩토링 가능과 더 정확한 코드 완성 기능을 제공할 수 있다.

코틀린의 타입 시스템은 이밖에도 클래스, 인터페이스 등 자바와 비슷하게 작동한다. 다만, 몇 가지 새로운 점이 있는데 제일 중요한 특성은 **Null이 될 수 있는 타입**을 지원한다는 점이다. 이 부분에 대해서는 다음에 다시 언급하면서 설명할 예정이다.

### 함수형 프로그래밍과 객체지향 프로그래밍
#### 함수형 프로그래밍의 핵심 개념
+ 일급 시민인 함수 : 함수를 변수에 대입하거나 함수를 다른 함수의 인자로 전달하는 등의 일반 값처럼 사용할 수 있다.
+ 불변성: 일단 만들어지고 나면 내부 상태가 절대로 바뀌지 않는 불변 객체를 사용해 프로그램을 작성한다. 
+ 부수 효과 없음: 입력이 같으면 항상 같은 결과값을 반환하며 다른 객체의 상태를 변경하지 않는 순수함수를 사용한다.

핵심 개념을 이해했다면 왜 함수형 스타일로 프로그래밍을 하는 걸까?

#### 함수형 프로그래밍 장점
+ 간결성: 함수형 프로그래밍의 일급시민 특성 덕분에 명령형 코드보다 간결하게 작성할 수 있다.
+ 안정성: 불변성 특성과 순수함수라는 특성 덕분에 다중 스레드를 사용해도 안전하다. (save multithreading)
+ 테스트하기 쉬움

코틀린은 함수형 스타일로 프로그래밍할 수 있도록 지원하지만 함수형 프로그래밍 스타일은 강제하진 않는다. 코틀린으로 코드를 작성할 때는 객체지향과 함수형 접근 방법을 함께 조합해서 문제에 가장 적합한 도구를 사용하면 된다.

### 무료 오픈소스
코틀린은 모두 오픈소스이며 어떤 목적이든 무료로 사용이 가능하다.

## 코틀린 응용
코틀린은 자바 코드와 **상호운용할 수 있다는 큰 장점**을 가지고 있다. 자바 클래스를 코틀린으로 확장하거나 코틀린 코드에 자바 애노테이션을 붙이더라도 별도의 변환 과정없이 바로 사용이 가능하다. 그러면서 코드는 더 간결해지고 더 신뢰성이 높아질 것이다. 
또한, 코틀린을 사용하더라도 **성능 측면에 아무 손해가 없다.** 코틀린 컴파일러가 생성한 바이트코드는 일반적인 자바 코드와 똑같이 효율적으로 실행되며 런타임 시스템도 상당히 작아서 패키징한 애플리케이션도 그리 많이 늘어나지 않는다.

## 코틀린의 철학
### 실용성
코틀린은 실무에서 사용하기 위해 만들어진 실용적인 언어로 다른 프로그래밍 언어가 채택한 이미 성공적으로 검증된 해법과 기능에 의존한다. 이로 인해 언어의 복잡도가 줄어들고 이미 알고 있는 기존 개념을 통해 코틀린을 더 쉽게 배울 수 있다.

### 간결성
+ 준비 코드를 줄임: 자바의 getter, setter 등 준비코드를 코틀린에서는 묵시적으로 제공하기 때문에 핵심코드만 남게 된다.
+ 라이브러리 함수 호출: 반복되거나 길어질 수 있는 코드를 라이브러리 함수 호출로 대치할 수 있다. 특히, 람다 사용이 가능하기 때문에 일반적인 기능을 라이브러리 안에 캡슐화하고 작업에 따라 달라지는 개별적인 내용에 대해서는 사용자가 작성한 코드 안에 남겨둘 수 있다.
+ 숏코딩에만 중점을 둔 언어는 아니기 때문에 언어가 제공하지 않는 연산자를 정의할 수 있도록 허용하지는 않는다.

### 안정성
안정성을 확보하기 위해서는 프로그램에 더 많은 정보를 덧붙여야 하므로 생산성이 하락하는 것을 감수해야 하기 때문에 안정성과 생산성 사이에는 **트레이드 오프** 관계가 성립된다.

위에서 설명한 것처럼 코틀린은 자바처럼 정적 타입 지정 언어로서 안정성을 갖지만 코틀린 컴파일러가 타입 추론을 해 주기 때문에 명시적으로 타입을 지정할 필요가 없어 자바보다 더 적은 비용으로 타입 안정성을 사용할 수 있다.

코틀린은 실행 시점에 오류를 발생시키는 대신 **컴파일 시점 검사**를 통해 오류를 더 많이 방지해주고자 한다.

1. null이 될 수 있는 타입 지원: 코틀린의 타입 시스템은 실행 시점에 NullPointerException이 발생할 수 있는 연산을 사용하는 코드를 금지한다.

```kotlin
val s1 : String ?= null // null이 될 수 있음
val s2 : String = ""    // null이 될 수 없음
```

2. 타입 검사와 캐스트가 한 연산자에 의해 이루어진다. 따라서 ClassNotFoundException을 방지해 준다. 어떤 객체의 타입을 검사했고 그 객체가 그 타입에 속한다면 해당 타입의 메소드나 필드 등의 멤버를 별도의 캐스트 없이 사용할 수 있다.

```kotlin
if (value is String) // 타입 검사
	println(value.toUpperCase()) // 해당 타입의 메소드를 사용
```


### 상호운용성
코틀린 운용 부분에서 설명했듯이 코틀린은 자바와 상호운용성이라는 큰 장점을 가지고 있기 때문에 자바와 코틀린 코드를 프로젝트에서 원하는 대로 섞어 쓸 수 있는 유연성을 발휘할 수 있다.
또한, 코틀린은 기존 자바 라이브러리를 최대한 활용하고 있기 때문에 자바와 서로 간의 API를 호출할 때도 랩핑하거나 변환할 필요가 없다.

## 코틀린 도구 사용
코틀린 소스코드를 저장할 때는 보통 “.kt”라는 확장자를 파일에 붙인다. 코틀린 컴파일러는 자바 컴파일러가 자바 소스코드를 컴파일할 때와 마찬가지로 “.class” 파일을 만들어낸다.
![](1.%20%E1%84%8F%E1%85%A9%E1%84%90%E1%85%B3%E1%86%AF%E1%84%85%E1%85%B5%E1%86%AB%E1%84%8B%E1%85%B5%E1%84%85%E1%85%A1%E1%86%AB%20%E1%84%86%E1%85%AE%E1%84%8B%E1%85%A5%E1%86%BA%E1%84%8B%E1%85%B5%E1%84%86%E1%85%A7,%20%E1%84%8B%E1%85%AB%20%E1%84%91%E1%85%B5%E1%86%AF%E1%84%8B%E1%85%AD%E1%84%92%E1%85%A1%E1%86%AB%E1%84%80%E1%85%A1/Kotlin.jpeg)<!-- {"width":388} -->
코틀린 컴파일러로 컴파일한 코드는 코틀린 런타임 라이브러리에 의존하기 때문에 코틀린으로 컴파일한 애플리케이션을 배포할 때는 런타임 라이브러리도 함께 배포해야 한다.
코틀린은 기존의 빌드 시스템인 maven, gradle 등의 빌드 시스템과 호환하기 때문에 애플리케이션을 패키지할 때 알아서 코틀린 런타임을 포함시켜준다.

## 요약
+ 코틀린은 타입 추론을 지원하는 정적 타입 지정언어이다.
+ 코틀린은 객체지향과 함수형 프로그래밍 스타일을 모두 지원한다.
+ 코틀린은 서버 개발이나 안드로이드 개발에 활용할 수 있다.
+ 코틀린은 무료며 오픈소스다.
+ 코틀린은 실용적이며 안전하고, 간결하며 상호운용성이 좋다.

#코틀린

